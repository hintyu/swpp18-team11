<div class="container">
  <mat-list class="mycart-list">
    <mat-list-item *ngFor="let purchasable of myCart; let idx = index">
      <div class="purchasable-detail">
        <img src="{{purchasable.thumbnail}}"
             width="50" height="50">
        <label>{{purchasable.name}}</label>
        <mat-expansion-panel *ngIf="hasOptions(purchasable)"
                             [hideToggle]="true">
          <mat-expansion-panel-header class="option-panel-header">
            <mat-panel-title class="option-panel-title">
              옵션 수정
              <mat-icon>add_circle_outline</mat-icon>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <app-select-option [options]="purchasable.options"
                             (optionChanged)="updateOptionChange($event)"></app-select-option>
        </mat-expansion-panel>
        <mat-divider></mat-divider>
      </div>
      <div class="quantity-control-buttons">
        <button  mat-button
                 class="quantity-button"
                 (click)="decrement(idx)">-</button>
        {{purchasable.quantity}}개
        <button  mat-button
                 class="quantity-button"
                 (click)="increment(idx)">+</button>
      </div>
      <div>
        {{purchasable.total_price}}원
        <button (click)="removePurchasable(idx)">X</button>
      </div>
    </mat-list-item>    <!--End of my cart list-->
  </mat-list>

  <div id="totalPrice">
    total {{totalPrice}}원
  </div>
  <div class="button-group">
    <button mat-stroked-button
            class="navigate-button"
            (click)="emptyCart()">
      <mat-icon>remove_shopping_cart</mat-icon>
      비우기</button>
    <button mat-stroked-button
            class="navigate-button"
            (click)="back()">
      <mat-icon>arrow_back</mat-icon>
      뒤로 가기</button>
    <button mat-raised-button
            class="navigate-button"
            color="primary"
            routerLink="/payment">
      <mat-icon>credit_card</mat-icon>
      결제하기</button>
  </div>
</div>


<!--mat-list *ngIf="hasOptions(purchasable)">
  <mat-list-item *ngFor="let option of purchasable.options">
            <span *ngIf="option.quantity != 0">
              {{option.name}} x{{option.quantity}}</span>
    <button (click)="selectIndex(idx)"
            (click)="switchTab()">옵션 설정</button>
  </mat-list-item>
</mat-list-->
<!--
  <app-select-option [options]="myCart[selectedIndex].options"
                     (optionChanged)="updateOptionChange($event)"></app-select-option>
-->
